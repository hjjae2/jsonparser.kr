<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/uikit@3.9.2/dist/css/uikit.min.css" />
    <style>
        textarea {
            padding: 10px; 
            margin-top: 10px;
            border-radius: 3px;
        }

        pre {
            outline: 1px solid #a7aaad;
            padding: 5px; 
            margin: 5px;
        }

        .uk-notification-message {
            background: white !important;
            text-align: right;
        }
    </style>
    <title>Json Parser, Prettify Online</title>
</head>
<body>
<div class="uk-container uk-container-expand uk-grid uk-text-justify uk-padding">
    <div class="uk-width-2-5">
            <div class="uk-flex">
                INPUT
            </div>
            <textarea id="input" style="resize: none; width: 100%; height:100vh;" oninput="getOutput()" placeholder='{data:"json"}'></textarea>
    </div>
    
    <div class="uk-margin-top uk-align-center">
        <legend class="uk-legend">Space</legend>
        <div class="uk-margin uk-grid-small uk-child-width-auto uk-grid">
            <label><input class="uk-radio" type="radio" name="spaces" value="2" onclick="getOutput()"> 2</label>
            <label><input class="uk-radio" type="radio" name="spaces" value="4" onclick="getOutput()" checked> 4</label>
        </div>
    </div>

    <div class="uk-width-2-5">
        <div class="uk-flex uk-flex-between">
            OUTPUT
            <button class="uk-button uk-button-small uk-button-default" uk-tooltip="Copy to clipboard" onclick="copyToClipboard()">COPY</button>
        </div>
        <pre id="output" style="resize: none; width: 100%; height:100vh;">
{
    data: 'json',
}</pre>
    </div>
</div>

<!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script> -->
<script src="https://unpkg.com/json5@^2.0.0/dist/index.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/uikit@3.9.2/dist/js/uikit.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/uikit@3.9.2/dist/js/uikit-icons.min.js"></script>

<script>
function getOutput() {
    const space = getSpace();
    const input = document.getElementById('input');
    const defaultInputValue = '{data:"json"}';
    let inputValue = input.value;
    let output = '';

    if(!inputValue) {
        inputValue = defaultInputValue;
    }

    try {
        output = JSON5.stringify(JSON5.parse(inputValue), null, space);
    } catch (e) {
        output = e;
    }

    document.getElementById('output').innerHTML = output;
}

function getSpace() {
    return Number(document.querySelector('input[name="spaces"]:checked').value);
}

function copyToClipboard() {
    const output = document.querySelector('pre');
    const textarea = document.createElement('textarea');

    textarea.textContent = output.textContent;
    textarea.select();
    textarea.setSelectionRange(0, 99999);

    document.body.append(textarea);
    navigator.clipboard.writeText(textarea.value);

    textarea.remove();
    UIkit.notification("Copied!", {pos: 'bottom-right', timeout:100, status: 'success'})
}
</script>
</body>
</html>